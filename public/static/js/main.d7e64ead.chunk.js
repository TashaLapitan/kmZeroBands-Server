(this["webpackJsonpget-scripts"]=this["webpackJsonpget-scripts"]||[]).push([[0],{38:function(e,t,n){},61:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n(1),r=n.n(i),s=n(31),c=n.n(s),o=n(8),l=(n(38),n(5)),u=n(11),d=n(3),h=n(2),j=n(4),b=n(7),g=n(6),p=n(15),O=n.n(p),x=new(function(){function e(){Object(h.a)(this,e),this.auth=O.a.create({baseURL:"https://zero-km-bands.herokuapp.com",withCredentials:!0})}return Object(j.a)(e,[{key:"signup",value:function(e,t,n){return this.auth.post("/auth/signup",{username:e,email:t,password:n}).then((function(e){return e.data}))}},{key:"login",value:function(e,t){return this.auth.post("/auth/login",{email:e,password:t}).then((function(e){return e.data}))}},{key:"logout",value:function(){return this.auth.get("/auth/logout").then((function(e){return e.data}))}},{key:"me",value:function(){return this.auth.get("/auth/me").then((function(e){return e.data}))}}]),e}()),m=r.a.createContext(),f=m.Consumer,v=m.Provider,y=function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={isLoggedIn:!1,isLoading:!0,user:null},e.signup=function(t,n,a){x.signup(t,n,a).then((function(t){return e.setState({isLoggedIn:!0,user:t})})).catch((function(t){e.setState({isLoggedIn:!1,user:null})}))},e.login=function(t,n){x.login(t,n).then((function(t){e.setState({isLoggedIn:!0,user:t})})).catch((function(t){e.setState({isLoggedIn:!1,user:null})}))},e.logout=function(){x.logout().then((function(){return e.setState({isLoggedIn:!1,user:null})})).catch((function(e){return console.log(e)}))},e}return Object(j.a)(n,[{key:"componentDidMount",value:function(){var e=this;x.me().then((function(t){return e.setState({isLoggedIn:!0,user:t,isLoading:!1})})).catch((function(t){return e.setState({isLoggedIn:!1,user:null,isLoading:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.isLoggedIn,n=e.isLoading,i=e.user,r=this.signup,s=this.login,c=this.logout;return n?Object(a.jsx)("p",{children:"Loading"}):Object(a.jsx)(v,{value:{isLoggedIn:t,isLoading:n,user:i,signup:r,login:s,logout:c},children:this.props.children})}}]),n}(r.a.Component),C=function(e){return function(t){Object(b.a)(i,t);var n=Object(g.a)(i);function i(){return Object(h.a)(this,i),n.apply(this,arguments)}return Object(j.a)(i,[{key:"render",value:function(){var t=this;return Object(a.jsx)(f,{children:function(n){var i=n.isLoggedIn,r=n.isLoading,s=n.user,c=n.signup,o=n.login,l=n.logout;return Object(a.jsx)(e,Object(d.a)(Object(d.a)({},t.props),{},{isLoggedIn:i,isLoading:r,user:s,signup:c,login:o,logout:l}))}})}}]),i}(r.a.Component)},w=new function e(){var t=this;Object(h.a)(this,e),this.getAllGigs=function(){return t.api.get("/gigs")},this.searchGigs=function(e){return t.api.get("/gigs/search/".concat(e))},this.getGigByID=function(e){return t.api.get("/bands/".concat(e))},this.createGig=function(e,n,a,i,r,s,c){return t.api.post("/gigs",{title:e,description:n,date:a,city:i,genre:r,durationHours:s,pricePerHour:c})},this.api=O.a.create({baseURL:"".concat("https://zero-km-bands.herokuapp.com","/api"),withCredentials:!0})},B=new function e(){var t=this;Object(h.a)(this,e),this.getAllBands=function(){return t.api.get("/bands")},this.getBandByID=function(e){return t.api.get("/bands/".concat(e))},this.createBand=function(e,n,a,i,r,s,c,o,l,u,d,h,j,b){var g=[l,u,d].filter((function(e){return""!==e}));return t.api.post("/bands",{title:e,description:n,image:a,city:i,genres:g,phoneNumber:r,contactInfo:s,instagramUrl:c,youtubeUrl:o,pricePerHour:h,canCustomizePlaylist:j,minNoticePeriod:b})},this.updateBandInfo=function(e,n,a,i,r,s,c,o,l,u,d,h,j,b,g){var p=[u,d,h];return t.api.put("/bands/".concat(e),{title:n,description:a,city:i,image:r,genres:p,phoneNumber:s,contactInfo:c,instagramUrl:o,youtubeUrl:l,pricePerHour:j,canCustomizePlaylist:b,minNoticePeriod:g})},this.deleteBand=function(e){return t.api.delete("/bands/".concat(e))},this.api=O.a.create({baseURL:"".concat("https://zero-km-bands.herokuapp.com","/api"),withCredentials:!0})},S=function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={title:"",description:"",date:void 0,city:"",genre:"",durationHours:void 0,pricePerHour:void 0},e.handleInput=function(t){var n=t.target,a=n.name,i=n.value;e.setState(Object(u.a)({},a,i))},e.handleGigSubmit=function(t){t.preventDefault();var n=e.state,a=n.title,i=n.description,r=n.date,s=n.city,c=n.genre,o=n.durationHours,l=n.pricePerHour;w.createGig(a,i,r,s,c,o,l).then((function(){e.props.toggleAddGig(),e.props.getGigs()}))},e}return Object(j.a)(n,[{key:"render",value:function(){var e=this;return Object(a.jsxs)("form",{onSubmit:function(t){return e.handleGigSubmit(t)},children:[Object(a.jsx)("h2",{children:"Tell us more about your gig"}),Object(a.jsx)("label",{children:"Title: "})," ",Object(a.jsx)("br",{}),Object(a.jsx)("input",{type:"text",name:"title",value:this.state.value,placeholder:"Ex.: A romantic gesture",onChange:function(t){return e.handleInput(t)}})," ",Object(a.jsx)("br",{}),Object(a.jsx)("label",{children:"City: "})," ",Object(a.jsx)("br",{}),Object(a.jsx)("input",{type:"text",name:"city",value:this.state.city,onChange:function(t){return e.handleInput(t)}})," ",Object(a.jsx)("br",{}),Object(a.jsx)("label",{children:"When are you planning this gig: "})," ",Object(a.jsx)("br",{}),Object(a.jsx)("input",{type:"date",name:"date",value:this.state.date,onChange:function(t){return e.handleInput(t)}})," ",Object(a.jsx)("br",{}),Object(a.jsx)("label",{children:"Description: "})," ",Object(a.jsx)("br",{}),Object(a.jsx)("textarea",{rows:"4",cols:"50",name:"description",value:this.state.description,placeholder:"Ex.: Looking for a decent sax player to play a cheesy song under my gf's window",onChange:function(t){return e.handleInput(t)}})," ",Object(a.jsx)("br",{}),Object(a.jsx)("label",{children:"Which music genre best describes your gig? "})," ",Object(a.jsx)("br",{}),Object(a.jsx)("input",{type:"text",name:"genre",value:this.state.genre,onChange:function(t){return e.handleInput(t)}})," ",Object(a.jsx)("br",{}),Object(a.jsx)("label",{children:"How long will your gig last? Give a number in hours"})," ",Object(a.jsx)("br",{}),Object(a.jsx)("input",{type:"number",min:"0",name:"durationHours",value:this.state.durationHours,onChange:function(t){return e.handleInput(t)}}),Object(a.jsx)("span",{children:" hours"})," ",Object(a.jsx)("br",{}),Object(a.jsx)("label",{children:"How much do you offer?"})," ",Object(a.jsx)("br",{}),Object(a.jsx)("input",{type:"number",min:"0",name:"pricePerHour",value:this.state.pricePerHour,onChange:function(t){return e.handleInput(t)}}),Object(a.jsx)("span",{children:" \u20ac per hour"})," ",Object(a.jsx)("br",{}),Object(a.jsx)("button",{type:"submit",children:"Post my gig!"})]})}}]),n}(i.Component),P=function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={gig:{title:"",description:"",city:"",date:void 0,genre:"",durationHours:void 0,pricePerHour:void 0},user:{username:"",phoneNumber:""}},e}return Object(j.a)(n,[{key:"componentDidMount",value:function(){console.log("this.props",this.props),this.setState({gig:this.props.gig,user:this.props.gig.clientID})}},{key:"render",value:function(){var e=this.state.gig,t=e.title,n=e.city,i=e.date,r=e.durationHours,s=e.pricePerHour,c=e.genre,o=e.description,l=this.state.user,u=l.username,d=l.phoneNumber;return Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:t}),Object(a.jsxs)("ul",{children:[Object(a.jsx)("li",{children:n}),Object(a.jsx)("li",{children:function(e){var t=new Date(e).toString().slice(4,15);return t=t.slice(4,7)+t.slice(0,4)+t.slice(7,11)}(i)}),Object(a.jsxs)("li",{children:[r," hours"]}),Object(a.jsxs)("li",{children:[s,"\u20ac per hour"]}),Object(a.jsx)("li",{children:c})]}),Object(a.jsx)("p",{children:o}),Object(a.jsxs)("p",{children:["Posted by: ",u]}),Object(a.jsxs)("p",{children:["Contact: ",d]})]})}}]),n}(i.Component);var k=function(e){var t=e.band,n=t.title,i=t.city,r=t.genres;return Object(a.jsxs)("div",{children:[Object(a.jsx)("h3",{children:n}),Object(a.jsx)("p",{children:i}),r.map((function(e){return Object(a.jsx)("p",{children:e},e)}))]})};var I=function(e){var t=e.handleChange,n=e.handleSearchSubmit,i=e.bandCities,r=e.bandGenres,s=e.bandSearch,c=s.city,o=s.genre,l=s.title;return Object(a.jsxs)("form",{onSubmit:function(e){return n(e)},children:[Object(a.jsx)("input",{list:"cities",name:"city",placeholder:"Choose a city",value:c,onChange:function(e){return t(e)}}),Object(a.jsx)("datalist",{id:"cities",children:i.map((function(e){return Object(a.jsx)("option",{value:e},e)}))}),Object(a.jsx)("input",{list:"genres",name:"genre",placeholder:"Choose a genre",value:o,onChange:function(e){return t(e)}}),Object(a.jsx)("datalist",{id:"genres",children:r.map((function(e){return Object(a.jsx)("option",{value:e},e)}))}),Object(a.jsx)("input",{type:"text",name:"title",value:l,onChange:function(e){return t(e)},placeholder:"Type the name of a band"}),Object(a.jsx)("button",{type:"submit",children:"Search"})]})},L=C(function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={showAddGig:!1,gigsArr:[],bandCities:[],bandGenres:[],bandSearch:{city:"",genre:"",title:""},bandsToDisplay:[],allBands:[],searchBandRes:[],showSearchResults:!1},e.toggleAddGig=function(){e.setState({showAddGig:!e.state.showAddGig})},e.getGigs=function(){w.getAllGigs().then((function(t){e.setState({gigsArr:t.data})}))},e.getBandOptions=function(){B.getAllBands().then((function(t){var n=t.data,a=[],i=[];n.forEach((function(e){a.includes(e.city)||a.push(e.city),e.genres.forEach((function(e){e&&!i.includes(e)&&i.push(e)}))})),e.setState({bandCities:a,bandGenres:i})}))},e.getAllBands=function(){B.getAllBands().then((function(t){var n=t.data;if(n.length<=10)e.setState({bandsToDisplay:n,allBands:n,searchBandRes:n});else{for(var a=[],i=0;i<10;i++){var r=Math.floor(Math.random()*n.length);a.push(n[r])}e.setState({bandsToDisplay:a,allBands:n,searchBandRes:n})}}))},e.filterBand=function(t,n){var a=[];if("city"===t||"title"===t){var i=e.state.searchBandRes.filter((function(e){return e[t].toLowerCase().includes(n.toLowerCase())}));e.setState({searchBandRes:i})}else a=e.state.searchBandRes.filter((function(e){return e.genres[0].toLowerCase().includes(n.toLowerCase())||e.genres[1].toLowerCase().includes(n.toLowerCase())||e.genres[2].toLowerCase().includes(n.toLowerCase())})),e.setState({searchBandRes:a})},e.handleChange=function(t){var n=t.target,a=n.name,i=n.value;e.setState({bandSearch:Object(d.a)(Object(d.a)({},e.state.bandSearch),{},Object(u.a)({},a,i)),showSearchResults:!0}),e.state.bandSearch==={city:"",genre:"",title:""}?e.setState({searchBandRes:e.state.allBands}):e.filterBand(a,e.state.bandSearch[a]),console.log(e.state.searchBandRes)},e}return Object(j.a)(n,[{key:"componentDidMount",value:function(){this.getGigs(),this.getBandOptions(),this.getAllBands()}},{key:"render",value:function(){return Object(a.jsxs)("div",{children:[Object(a.jsxs)("main",{children:[Object(a.jsxs)("section",{children:[Object(a.jsx)("h2",{children:"Search for a band in your area"}),Object(a.jsx)(I,{handleChange:this.handleChange,handleSearchSubmit:this.handleSearchSubmit,bandSearch:this.state.bandSearch,bandCities:this.state.bandCities,bandGenres:this.state.bandGenres}),this.state.showSearchResults?Object(a.jsx)("div",{children:this.state.searchBandRes===[]?Object(a.jsx)("div",{children:Object(a.jsx)("p",{children:"Sorry, couldn't find any bands"})}):Object(a.jsx)("div",{children:this.state.searchBandRes.map((function(e){return Object(a.jsx)(k,{band:e},e._id)}))})}):Object(a.jsx)("div",{children:this.state.bandsToDisplay.map((function(e){return Object(a.jsx)(k,{band:e},e._id)}))})]}),this.props.isLoggedIn&&this.state.showAddGig?Object(a.jsxs)("div",{children:[Object(a.jsx)(S,{toggleAddGig:this.toggleAddGig,getGigs:this.getGigs}),Object(a.jsx)("button",{onClick:this.toggleAddGig,children:"Discard"})]}):this.props.isLoggedIn&&!this.state.showAddGig?Object(a.jsxs)("div",{children:[Object(a.jsx)("p",{children:"Didn't find what you were looking for? No worries, publish your own gig and receive offers from your local musicians!"}),Object(a.jsx)("button",{onClick:this.toggleAddGig,children:"Post a gig"})]}):Object(a.jsxs)("div",{children:[Object(a.jsx)("p",{children:"Didn't find what you were looking for? No worries, publish your own gig and receive offers from your local musicians!"}),Object(a.jsx)(o.b,{to:"/login",children:Object(a.jsx)("button",{children:"Post a gig"})})]})]}),Object(a.jsx)("section",{children:this.state.gigsArr.map((function(e){var t=new Date(Date.now());if(new Date(e.date)>=t)return Object(a.jsx)(P,{gig:e},e._id)}))}),Object(a.jsx)("aside",{children:"FAQ link"})]})}}]),n}(i.Component)),U=C(function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={username:"",email:"",password:""},e.handleFormSubmit=function(t){t.preventDefault();var n=e.state,a=n.username,i=n.email,r=n.password;e.props.signup(a,i,r)},e.handleChange=function(t){var n=t.target,a=n.name,i=n.value;e.setState(Object(u.a)({},a,i))},e}return Object(j.a)(n,[{key:"render",value:function(){var e=this.state,t=e.username,n=e.email,i=e.password;return Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{children:"Sign Up"}),Object(a.jsxs)("form",{onSubmit:this.handleFormSubmit,children:[Object(a.jsx)("label",{children:"Username:"}),Object(a.jsx)("input",{type:"text",name:"username",value:t,onChange:this.handleChange}),Object(a.jsx)("label",{children:"Email:"}),Object(a.jsx)("input",{type:"text",name:"email",value:n,onChange:this.handleChange}),Object(a.jsx)("label",{children:"Password:"}),Object(a.jsx)("input",{type:"password",name:"password",value:i,onChange:this.handleChange}),Object(a.jsx)("input",{type:"submit",value:"Signup"})]}),Object(a.jsx)("p",{children:"Already have account?"}),Object(a.jsx)(o.b,{to:"/login",children:" Login"})]})}}]),n}(i.Component)),A=C(function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={email:"",password:""},e.handleFormSubmit=function(t){t.preventDefault();var n=e.state,a=n.email,i=n.password;e.props.login(a,i)},e.handleChange=function(t){var n=t.target,a=n.name,i=n.value;e.setState(Object(u.a)({},a,i))},e}return Object(j.a)(n,[{key:"render",value:function(){var e=this.state,t=e.email,n=e.password;return Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{children:"Login"}),Object(a.jsxs)("form",{onSubmit:this.handleFormSubmit,children:[Object(a.jsx)("label",{children:"Email:"}),Object(a.jsx)("input",{type:"text",name:"email",value:t,onChange:this.handleChange}),Object(a.jsx)("label",{children:"Password:"}),Object(a.jsx)("input",{type:"password",name:"password",value:n,onChange:this.handleChange}),Object(a.jsx)("input",{type:"submit",value:"Login"})]}),Object(a.jsx)("p",{children:"Don't have an account yet?"}),Object(a.jsx)(o.b,{to:"/signup",children:"Create account"})]})}}]),n}(i.Component)),D=new function e(){var t=this;Object(h.a)(this,e),this.getUser=function(e){return t.api.get("/user/".concat(e))},this.editUser=function(e,n,a,i){return t.api.put("/user",{username:e,image:n,phoneNumber:a,aboutBio:i})},this.deleteUser=function(e){return t.api.delete("/user/".concat(e))},this.api=O.a.create({baseURL:"".concat("https://zero-km-bands.herokuapp.com","/api"),withCredentials:!0})};var N=function(e){var t=e.user.gigHistory;return Object(a.jsxs)("section",{children:[Object(a.jsxs)("table",{children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:Object(a.jsx)("th",{children:Object(a.jsx)("h2",{children:"My Profile Info"})})})}),Object(a.jsxs)("tbody",{children:[Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:"Username"}),Object(a.jsx)("td",{children:e.user.username})]}),Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:"Phone number"}),Object(a.jsx)("td",{children:e.user.phoneNumber})]}),Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:"About me"}),Object(a.jsx)("td",{children:e.user.aboutBio})]})]})]}),Object(a.jsx)("button",{onClick:e.toggleEditProfile,children:"Edit Profile"}),Object(a.jsxs)("div",{children:[Object(a.jsx)("h2",{children:"My pending gigs: "}),t?t.map((function(e){var t=new Date(Date.now());if(new Date(e.date)>=t)return Object(a.jsx)(P,{gig:e},e._id)})):Object(a.jsx)("p",{children:"You haven't posted any gigs yet"})]})]})};var G=function(e){var t=e.handleChange,n=e.handleFileUpload,i=e.handleProfileFormSubmit,r=e.user,s=r.username,c=r.phoneNumber,o=r.aboutBio;return Object(a.jsxs)("form",{onSubmit:function(e){return i(e)},children:[Object(a.jsx)("h2",{children:"My Profile Info"}),Object(a.jsx)("label",{children:"Profile image"}),Object(a.jsx)("input",{type:"file",onChange:function(e){return n(e)}}),Object(a.jsx)("label",{children:"Username"}),Object(a.jsx)("input",{type:"text",name:"username",value:s,onChange:function(e){return t(e)}}),Object(a.jsx)("label",{children:"Phone number"}),Object(a.jsx)("input",{type:"text",name:"phoneNumber",value:c,onChange:function(e){return t(e)}}),Object(a.jsx)("label",{children:"About me"}),Object(a.jsx)("textarea",{rows:"4",cols:"50",name:"aboutBio",value:o,placeholder:"More info about you",onChange:function(e){return t(e)}}),Object(a.jsx)("input",{type:"submit",value:"Update Info"})]})};var H=function(e){var t=e.bandExists,n=e.handleBandChange,i=e.handleBandFormSubmit,r=e.updateBand,s=e.deleteBand,c=e.handleBandImgUpload,o=e.band,l=o.title,u=o.image,d=o.city,h=o.description,j=o.phoneNumber,b=o.contactInfo,g=o.instagramUrl,p=o.youtubeUrl,O=o.genre1,x=o.genre2,m=o.genre3,f=o.pricePerHour,v=o.canCustomizePlaylist,y=o.minNoticePeriod;return Object(a.jsxs)("div",{children:[Object(a.jsx)("img",{src:u,alt:""}),Object(a.jsxs)("form",{onSubmit:function(e){return i(e)},children:[Object(a.jsx)("label",{children:"Band Photo: "}),Object(a.jsx)("input",{type:"file",onChange:function(e){return c(e)}})," ",Object(a.jsx)("br",{}),Object(a.jsx)("label",{children:"Title: "})," ",Object(a.jsx)("br",{}),Object(a.jsx)("input",{type:"text",name:"title",value:l,onChange:n})," ",Object(a.jsx)("br",{}),Object(a.jsx)("label",{children:"City: "})," ",Object(a.jsx)("br",{}),Object(a.jsx)("input",{type:"text",name:"city",value:d,onChange:n})," ",Object(a.jsx)("br",{}),Object(a.jsx)("label",{children:"Description: "})," ",Object(a.jsx)("br",{}),Object(a.jsx)("textarea",{rows:"4",cols:"50",name:"description",value:h,onChange:n})," ",Object(a.jsx)("br",{}),Object(a.jsx)("label",{children:"Phone Number: "})," ",Object(a.jsx)("br",{}),Object(a.jsx)("input",{type:"text",name:"phoneNumber",value:j,onChange:n})," ",Object(a.jsx)("br",{}),Object(a.jsx)("label",{children:"Contact Info: "})," ",Object(a.jsx)("br",{}),Object(a.jsx)("textarea",{rows:"4",cols:"50",name:"contactInfo",value:b,onChange:n})," ",Object(a.jsx)("br",{}),Object(a.jsx)("label",{children:"Which genres do you play? "})," ",Object(a.jsx)("br",{}),Object(a.jsx)("input",{type:"text",name:"genre1",value:O,onChange:n})," ",Object(a.jsx)("br",{}),Object(a.jsx)("input",{type:"text",name:"genre2",value:x,onChange:n})," ",Object(a.jsx)("br",{}),Object(a.jsx)("input",{type:"text",name:"genre3",value:m,onChange:n})," ",Object(a.jsx)("br",{}),Object(a.jsx)("label",{children:"Link to Instagram: "})," ",Object(a.jsx)("br",{}),Object(a.jsx)("input",{type:"text",name:"instagramUrl",value:g,onChange:n})," ",Object(a.jsx)("br",{}),Object(a.jsx)("label",{children:"Link to YouTube: "})," ",Object(a.jsx)("br",{}),Object(a.jsx)("input",{type:"text",name:"youtubeUrl",value:p,onChange:n})," ",Object(a.jsx)("br",{}),Object(a.jsx)("label",{children:"How much do you charge hourly? "})," ",Object(a.jsx)("br",{}),Object(a.jsx)("input",{type:"number",name:"pricePerHour",value:f,onChange:n})," ",Object(a.jsx)("br",{}),Object(a.jsx)("p",{children:"Would you tailor your playlist to client's request? "})," ",Object(a.jsx)("br",{}),Object(a.jsx)("label",{children:"Sure "}),v?Object(a.jsx)("input",{type:"radio",name:"canCustomizePlaylist",value:"true",checked:"checked",onChange:n}):Object(a.jsx)("input",{type:"radio",name:"canCustomizePlaylist",value:"true",onChange:n}),Object(a.jsx)("label",{children:"I'd rather not "}),v?Object(a.jsx)("input",{type:"radio",name:"canCustomizePlaylist",value:"false",onChange:n}):Object(a.jsx)("input",{type:"radio",name:"canCustomizePlaylist",value:"false",checked:"checked",onChange:n}),Object(a.jsx)("br",{}),Object(a.jsx)("label",{children:"If yes, how many days would you need to rehearse a new song? "})," ",Object(a.jsx)("br",{}),Object(a.jsx)("input",{type:"number",name:"minNoticePeriod",value:y,onChange:n}),Object(a.jsx)("br",{}),Object(a.jsx)("button",{type:"submit",children:"Publish"})]}),Object(a.jsx)("button",{onClick:r,children:"Cancel"}),t?Object(a.jsx)("button",{onClick:s,children:"Delete Band"}):null]})};var F=function(e){var t=e.band,n=t.title,i=t.description,r=t.city,s=t.image,c=t.phoneNumber,o=t.contactInfo,l=t.genres,u=t.instagramUrl,d=t.youtubeUrl,h=t.pricePerHour,j=t.canCustomizePlaylist,b=t.minNoticePeriod;return Object(a.jsxs)("div",{children:[Object(a.jsx)("img",{src:s,alt:""}),Object(a.jsxs)("table",{children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:Object(a.jsx)("th",{children:Object(a.jsx)("h2",{children:n})})})}),Object(a.jsxs)("tbody",{children:[Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:"City: "}),Object(a.jsx)("td",{children:r})]}),Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:"Description"}),Object(a.jsx)("td",{children:i})]}),Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:"Phone Number"}),Object(a.jsx)("td",{children:c})]}),Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:"Contact Information"}),Object(a.jsx)("td",{children:o})]}),Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:"Genres"}),Object(a.jsx)("td",{children:l.map((function(e,t,n){return t===n.length-1?Object(a.jsx)("span",{children:e},e):Object(a.jsxs)("span",{children:[e,", "]},e)}))})]}),Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:"Price per hour of performance"}),Object(a.jsxs)("td",{children:["\u20ac",h]})]}),Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:"Playlist"}),j?Object(a.jsx)("td",{children:"Clients can order a custom playlist"}):Object(a.jsx)("td",{children:"Cannot perform songs on client's request"})]}),j?Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:"Minimum rehersal time for a new song"}),Object(a.jsxs)("td",{children:[b," days"]})]}):null,u||d?Object(a.jsxs)("tr",{children:[u?Object(a.jsx)("td",{children:Object(a.jsx)("a",{href:u,target:"_blank",children:Object(a.jsx)("img",{src:"/images/instagram-logo.png",width:"30px",alt:""})})}):Object(a.jsx)("td",{}),d?Object(a.jsx)("td",{children:Object(a.jsx)("a",{to:d,target:"_blank",children:Object(a.jsx)("img",{src:"/images/youtube-logo.png",width:"30px",alt:""})})}):Object(a.jsx)("td",{})]}):null]})]})]})},E=C(function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={user:{username:"",image:"",phoneNumber:"",aboutBio:"",isBandPOC:!1,band:{title:"",description:"",phoneNumber:"",contactInfo:"",city:"",genre1:"",genre2:"",genre3:"",genres:[],image:"",instagramUrl:"",youtubeUrl:"",pricePerHour:void 0,canCustomizePlaylist:void 0,minNoticePeriod:void 0,pocID:void 0},gigHistory:[]},editProfile:!1,updateBand:!1,editBand:!1},e.toggleEditProfile=function(){e.setState({editProfile:!e.state.editProfile})},e.handleProfileFormSubmit=function(t){t.preventDefault();var n=e.state.user,a=n.username,i=n.image,r=n.phoneNumber,s=n.aboutBio;D.editUser(a,i,r,s).then((function(){e.toggleEditProfile()}))},e.handleBandFormSubmit=function(t){t.preventDefault();var n=e.state.user.band,a=n.title,i=n.description,r=n.image,s=n.city,c=n.phoneNumber,o=n.contactInfo,l=n.instagramUrl,u=n.youtubeUrl,d=n.genre1,h=n.genre2,j=n.genre3,b=n.pricePerHour,g=n.canCustomizePlaylist,p=n.minNoticePeriod;if(e.state.user.isBandPOC){var O=e.state.user.band._id;B.updateBandInfo(O,a,i,s,r,c,o,l,u,d,h,j,b,g,p).then((function(){e.updateBand(),e.setComponentState()}))}else B.createBand(a,i,r,s,c,o,l,u,d,h,j,b,g,p).then((function(){e.updateBand(),e.setComponentState()}))},e.handleChange=function(t){var n=t.target,a=n.name,i=n.value;e.setState({user:Object(d.a)(Object(d.a)({},e.state.user),{},Object(u.a)({},a,i))})},e.handleBandChange=function(t){var n=t.target,a=n.name,i=n.value;e.setState({user:Object(d.a)(Object(d.a)({},e.state.user),{},{band:Object(d.a)(Object(d.a)({},e.state.user.band),{},Object(u.a)({},a,i))})})},e.handleFileUpload=function(t){var n=t.target.files[0],a=new FormData;a.append("image",n),O.a.post("".concat("https://zero-km-bands.herokuapp.com","/api/user/upload"),a,{withCredentials:!0}).then((function(t){console.log("response is: ",t),e.setState({user:Object(d.a)(Object(d.a)({},e.state.user),{},{image:t.data.secure_url})})})).catch((function(e){console.log("Error while uploading the file: ",e)}))},e.handleBandImgUpload=function(t){var n=t.target.files[0],a=new FormData;a.append("image",n),O.a.post("".concat("https://zero-km-bands.herokuapp.com","/api/bands/upload"),a,{withCredentials:!0}).then((function(t){console.log("response is: ",t),e.setState({user:Object(d.a)(Object(d.a)({},e.state.user),{},{band:Object(d.a)(Object(d.a)({},e.state.user.band),{},{image:t.data.secure_url})})})})).catch((function(e){console.log("Error while uploading the file: ",e)}))},e.deleteProfile=function(){var t=e.props.user._id;D.deleteUser(t)},e.updateBand=function(){e.setState({updateBand:!e.state.updateBand})},e.deleteBand=function(){var t=e.state.user.band._id;B.deleteBand(t).then((function(){e.updateBand(),e.setComponentState()}))},e.setComponentState=function(){D.getUser(e.props.user._id).then((function(t){var n=t.data,a=n.username,i=n.image,r=n.dateOfBirth,s=n.phoneNumber,c=n.aboutBio,o=n.isBandPOC,l=n.band,u=n.gigHistory;l?(l.genre1=l.genres[0],l.genre2=l.genres[1],l.genre3=l.genres[2],e.setState({user:{username:a,image:i,dateOfBirth:r,phoneNumber:s,aboutBio:c,isBandPOC:o,band:l,gigHistory:u}})):e.setState({user:Object(d.a)(Object(d.a)({},e.state.user),{},{username:a,image:i,dateOfBirth:r,phoneNumber:s,aboutBio:c,isBandPOC:o,gigHistory:u})})}))},e}return Object(j.a)(n,[{key:"componentDidMount",value:function(){this.setComponentState()}},{key:"render",value:function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{children:this.state.user&&this.state.user.username}),Object(a.jsxs)("main",{children:[Object(a.jsx)("div",{children:this.state.user.image?Object(a.jsx)("img",{src:this.state.user.image,alt:""}):Object(a.jsx)("img",{src:"/images/profile-image-placeholder.png",width:"40px",alt:""})}),Object(a.jsx)("div",{children:this.state.editProfile?Object(a.jsx)(G,{user:this.state.user,handleProfileFormSubmit:this.handleProfileFormSubmit,handleChange:this.handleChange,handleFileUpload:this.handleFileUpload}):Object(a.jsx)(N,{user:this.state.user,toggleEditProfile:this.toggleEditProfile})})]}),Object(a.jsxs)("section",{children:[Object(a.jsx)("h2",{children:"My band"}),Object(a.jsx)("div",{children:this.state.user.isBandPOC?this.state.updateBand?Object(a.jsx)(H,{band:this.state.user.band,updateBand:this.updateBand,handleBandImgUpload:this.handleBandImgUpload,handleBandFormSubmit:this.handleBandFormSubmit,handleBandChange:this.handleBandChange,deleteBand:this.deleteBand,bandExists:this.state.user.isBandPOC}):Object(a.jsxs)("div",{children:[Object(a.jsx)(F,{band:this.state.user.band}),Object(a.jsx)("button",{onClick:this.updateBand,children:"Edit band"})]}):this.state.updateBand?Object(a.jsx)(H,{band:this.state.user.band,updateBand:this.updateBand,handleBandImgUpload:this.handleBandImgUpload,handleBandFormSubmit:this.handleBandFormSubmit,handleBandChange:this.handleBandChange}):Object(a.jsxs)("div",{children:[Object(a.jsx)("p",{children:"You haven't published a band yet"}),Object(a.jsx)("button",{onClick:this.updateBand,children:"Add a band"})]})})]}),Object(a.jsx)("aside",{})]})}}]),n}(i.Component));var z=function(e){var t=e.handleChange,n=e.handleSearchSubmit,i=e.gigCities,r=e.query;return Object(a.jsxs)("form",{onSubmit:function(e){return n(e)},children:[Object(a.jsx)("input",{list:"cities",name:"city",placeholder:"Choose a city",value:r,onChange:function(e){return t(e)}}),Object(a.jsx)("datalist",{id:"cities",children:i.map((function(e){return Object(a.jsx)("option",{value:e},e)}))}),Object(a.jsx)("button",{type:"submit",children:"Search"})]})},R=function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={gigsArr:[],gigCities:[],query:""},e.handleSearchSubmit=function(t){t.preventDefault(),w.searchGigs(e.state.query).then((function(t){e.setState({gigsArr:t.data,query:""})}))},e.handleChange=function(t){var n=t.target.value;e.setState({query:n})},e.showAllGigs=function(){w.getAllGigs().then((function(t){var n=t.data,a=[];n.forEach((function(e){a.includes(e.city)||a.push(e.city)})),e.setState({gigsArr:n,gigCities:a})}))},e}return Object(j.a)(n,[{key:"componentDidMount",value:function(){this.showAllGigs()}},{key:"render",value:function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{children:"Gig Board"}),Object(a.jsx)("h3",{children:"Select your city to check out current pending gigs"}),Object(a.jsx)(z,{handleSearchSubmit:this.handleSearchSubmit,handleChange:this.handleChange,gigCities:this.state.gigCities,query:this.state.query}),Object(a.jsx)("section",{children:this.state.gigsArr.map((function(e){var t=new Date(Date.now());if(new Date(e.date)>=t)return Object(a.jsx)(P,{gig:e},e._id)}))})]})}}]),n}(i.Component),M=function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={band:{image:"",title:"",city:"",genres:[],description:"",pocID:{username:""},contactInfo:"",phoneNumber:"",instagramUrl:"",youtubeUrl:"",canCustomizePlaylist:void 0,minNoticePeriod:void 0}},e.getBand=function(){var t=e.props.match.params.endpoint;B.getAllBands().then((function(n){var a=n.data.find((function(e){return e.endpoint===t}));console.log("foundBand",a),e.setState({band:a})}))},e}return Object(j.a)(n,[{key:"componentDidMount",value:function(){this.getBand()}},{key:"render",value:function(){var e=this.state.band,t=e.image,n=e.title,i=e.city,r=e.genres,s=e.description,c=e.pocID,o=e.contactInfo,l=e.pricePerHour,u=e.phoneNumber,d=e.instagramUrl,h=e.youtubeUrl,j=e.canCustomizePlaylist,b=e.minNoticePeriod;return Object(a.jsxs)("main",{children:[Object(a.jsx)("img",{src:t,alt:""}),Object(a.jsx)("h1",{children:n}),Object(a.jsx)("h3",{children:i}),Object(a.jsx)("ul",{children:r.map((function(e){return Object(a.jsx)("li",{children:e},e)}))}),Object(a.jsx)("p",{children:s}),Object(a.jsxs)("p",{children:["Managed by ",c.username]}),Object(a.jsxs)("p",{children:[u," / ",o]}),d?Object(a.jsx)("a",{href:d,children:Object(a.jsx)("img",{src:"/images/instagram-logo.png",width:"30px",alt:""})}):null,h?Object(a.jsx)("a",{href:h,children:Object(a.jsx)("img",{src:"/images/youtube-logo.png",width:"30px",alt:""})}):null,Object(a.jsx)("p",{children:Object(a.jsxs)("span",{children:["Usual price: ",l,"\u20ac per hour of performance"]})}),j?Object(a.jsxs)("div",{children:[n," can play a song of your choice given a minimum of ",b," days notice, how cool is that!"]}):Object(a.jsxs)("div",{children:[n," prefer to stick to their own well-rehearsed repertoire and do not accept custom orders"]})]})}}]),n}(i.Component),_=C(function(e){Object(b.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(h.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={user:{image:""}},e.setUserState=function(){e.props.isLoggedIn&&D.getUser(e.props.user._id).then((function(t){e.setState({user:t.data})}))},e}return Object(j.a)(n,[{key:"componentDidMount",value:function(){this.setUserState()}},{key:"render",value:function(){return Object(a.jsxs)("nav",{className:"navbar",children:[Object(a.jsx)(o.b,{to:"/",id:"home-btn",children:Object(a.jsx)("h4",{children:"Logoimage"})}),this.props.isLoggedIn?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{children:this.state.user.image?Object(a.jsx)(o.b,{to:"/my-profile",children:Object(a.jsx)("img",{src:this.state.user.image,alt:""})}):Object(a.jsx)(o.b,{to:"/my-profile",children:Object(a.jsx)("img",{src:"/images/profile-image-placeholder.png",width:"40px",alt:""})})}),Object(a.jsx)(o.b,{onClick:this.props.logout,to:"/",children:Object(a.jsx)("img",{src:"/images/logout-btn.png",width:"20px",height:"20px",alt:""})})]}):Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{children:[Object(a.jsx)(o.b,{to:"/login",children:Object(a.jsx)("button",{className:"navbar-button",children:"Login"})}),Object(a.jsx)(o.b,{to:"/signup",children:Object(a.jsx)("button",{className:"navbar-button",children:"Signup"})})]})})]})}}]),n}(i.Component));var q=C((function(e){var t=e.isLoggedIn,n=e.isLoading,i=e.component,r=e.exact,s=e.path;return n?"Loading":Object(a.jsx)(l.b,{exact:r,path:s,render:function(e){return t?Object(a.jsx)(l.a,{to:"/my-profile"}):t?void 0:Object(a.jsx)(i,Object(d.a)({},e))}})}));var T=C((function(e){var t=e.isLoggedIn,n=e.isLoading,i=e.component,r=e.exact,s=e.path;return n?"Loading":Object(a.jsx)(l.b,{exact:r,path:s,render:function(e){return t?t?Object(a.jsx)(i,Object(d.a)({},e)):void 0:Object(a.jsx)(l.a,{to:"/login"})}})}));var W=function(){return Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)(_,{}),Object(a.jsxs)(l.d,{children:[Object(a.jsx)(l.b,{exact:!0,path:"/",component:L}),Object(a.jsx)(l.b,{exact:!0,path:"/gigboard",component:R}),Object(a.jsx)(q,{exact:!0,path:"/signup",component:U}),Object(a.jsx)(q,{exact:!0,path:"/login",component:A}),Object(a.jsx)(T,{exact:!0,path:"/my-profile",component:E}),Object(a.jsx)(l.b,{exact:!0,path:"/:endpoint",component:M})]})]})};c.a.render(Object(a.jsx)(o.a,{children:Object(a.jsx)(y,{children:Object(a.jsx)(W,{})})}),document.getElementById("root"))}},[[61,1,2]]]);
//# sourceMappingURL=main.d7e64ead.chunk.js.map